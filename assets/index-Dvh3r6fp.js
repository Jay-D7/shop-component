import{r as l,F as N,c as v}from"./vendor-BCpiaSkF.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();var h={exports:{}},u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m;function E(){if(m)return u;m=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(o,e,t){var a=null;if(t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),"key"in e){t={};for(var c in e)c!=="key"&&(t[c]=e[c])}else t=e;return e=t.ref,{$$typeof:r,type:o,key:a,ref:e!==void 0?e:null,props:t}}return u.Fragment=n,u.jsx=i,u.jsxs=i,u}var x;function R(){return x||(x=1,h.exports=E()),h.exports}var s=R();function w(r){const[n,i]=r.split(",");return{street:n.replace(/\s*\d{2}-\d{3}/,"").trim(),city:(i==null?void 0:i.trim())||""}}const S=({shop:r,style:n})=>{const{street:i,city:o}=w(r.address);return l.useEffect(()=>{},[]),s.jsxs("li",{style:n,className:"shop-card","data-testid":"shop-item","aria-labelledby":`shop-title-${r.id}`,tabIndex:0,role:"listitem",children:[r.imageUrl&&s.jsxs("figure",{className:"shop-figure",children:[s.jsx("img",{src:r.imageUrl,alt:`Shop at ${i}, ${o}`,className:"shop-image",loading:"lazy"}),s.jsx("figcaption",{id:`shop-title-${r.id}`,className:"sr-only",children:`${i}, ${o}`})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"mb-2 flex justify-between",children:[s.jsxs("span",{className:"shop-id",children:["ID: ",r.id]}),s.jsx("span",{className:`shop-type ${r.type==="FRANCHISE"?"shop-type-franchise":"shop-type-regular"}`,children:r.type})]}),s.jsx("p",{className:"shop-address",children:`${i}, ${o}`}),s.jsx("button",{className:"shop-button","aria-label":`Add shop ${r.id} to cart`,children:"Add to Cart"})]})]},r.id)},L=({shops:r})=>{const n=l.useRef(null),[i,o]=l.useState(1200);l.useLayoutEffect(()=>{function d(){n.current&&o(n.current.offsetWidth)}return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);let e=1;i>1024?e=3:i>640&&(e=2);const t=Math.floor(i/e),a=t*e,c=340,p=Math.ceil(r.length/e),j=({columnIndex:d,rowIndex:g,style:y})=>{const f=g*e+d;return f>=r.length?null:s.jsx("div",{className:"shop-list-grid",style:y,children:s.jsx(S,{shop:r[f],style:{width:"100%",height:"100%"}})})};return s.jsx("div",{ref:n,className:"grid-container",children:s.jsx(N,{columnCount:e,rowCount:p,columnWidth:t,rowHeight:c,height:Math.min(c*p,800),width:a+16,outerElementType:"ul",children:j})})};function A(){return Math.random()>.5?"FRANCHISE":"REGULAR"}const $=(r=1e3)=>Array.from({length:r},(n,i)=>({id:String(i+1),address:i%2===0?"Jana Pawła 2 66-666, Kraków":"Oxford Street 00-001, Warsaw",imageUrl:"https://www.dotactiv.com/hs-fs/hubfs/Small%20Retailers_Shelf_PlaceHolder.jpg?width=300",type:A()})),C=({children:r})=>{const[n,i]=l.useState([]),[o,e]=l.useState(!0),[t,a]=l.useState(null);return l.useEffect(()=>{e(!0),a(null),setTimeout(()=>{try{i($(1e3)),e(!1)}catch{a("Failed to load shops."),e(!1)}},1e3)},[]),o?s.jsx("section",{className:"error-handler","aria-live":"polite",role:"status",children:s.jsx("h2",{className:"handler-text",children:"Loading shops..."})}):t==="Failed to load shops."?s.jsx("section",{className:"error-handler","aria-live":"polite",role:"alert",children:s.jsx("h2",{className:"handler-text-error",children:t})}):n.length?s.jsx("main",{className:"shop-list-wrapper",children:r({shops:n,loading:o,error:t})}):s.jsx("section",{className:"error-handler","aria-live":"polite",role:"status",children:s.jsx("h2",{className:"handler-text",children:"No shops found."})})},W=()=>s.jsx(C,{children:({shops:r,loading:n,error:i})=>s.jsx(L,{shops:r,loading:n,error:i})});v.createRoot(document.getElementById("root")).render(s.jsx(l.StrictMode,{children:s.jsx(W,{})}));
